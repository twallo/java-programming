"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[717],{62138:function(t,e,a){a.d(e,{Z:function(){return O}});var r=a(67294),n=a(85420),i=a(29114),s=a(1097),l=a(48086),o=a(22702),m=a(92206),h=a(87198),c=a(83332),d=a(82441),u=a(94694),p=a(50535),f=a(13578),g=a(77606),_=a(73935),v=a(40016),E=a(89711),b=a(90058),C=a(31690),w=a(31295),y=a(58591);const S=(0,p.default)(C.Z).withConfig({displayName:"DropdownMenu__StyledFormControl",componentId:"olaryr-0"})(["width:100%;"]);var Z=(0,y.Z)("user")((0,f.Z)((t=>{let{selectedVariant:e,setSelectedVariant:a,t:n}=t;const{0:i,1:s}=(0,r.useState)(0),l=(0,r.useRef)(null);(0,r.useEffect)((()=>{s(_.findDOMNode(l.current).offsetWidth)}));return r.createElement(S,{variant:"outlined"},r.createElement(E.Z,{ref:l,htmlFor:"course-variant-select"},n("whichCourse")),r.createElement(w.Z,{value:e,onChange:t=>{a(t.target.value)},input:r.createElement(v.Z,{labelWidth:i,name:"course-variant",id:"course-variant-select"})},r.createElement(b.Z,{value:"i"},"Java Programming I"),r.createElement(b.Z,{value:"ii"},"Java Programming II")))})));a(25444);const I=p.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),k=p.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),x=p.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),F=p.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]);(0,p.default)(g.G).withConfig({displayName:"CourseOptionsEditor__StyledIcon",componentId:"sc-15i8a3h-4"})(["margin-right:0.25rem;"]);class N extends r.Component{constructor(){super(...arguments),this.onClick=async t=>{t.preventDefault(),this.setState({submitting:!0});let e={applies_for_study_right:this.state.applies_for_study_right,digital_education_for_all:this.state.digital_education_for_all,marketing:this.state.marketing,research:this.state.research,course_variant:this.state.currentCourseVariant};const a={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};await(0,u.ek)({extraFields:e,userField:a}),this.setState({submitting:!1}),this.props.onComplete()},this.state={submitting:!1,error:!0,errorObj:{},applies_for_study_right:!1,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=t=>{const e=t.target.name,a=t.target.value;this.setState({[e]:a},(()=>{this.validate()}))},this.handleCheckboxInput=t=>{const e=t.target.name,a=t.target.checked;this.setState({[e]:a},(()=>{this.validate()}))},this.handleFocus=t=>{const e=t.target.name;this.setState({focused:e})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((t=>({error:void 0===t.research})))},this.setSelectedVariant=t=>{this.setState({currentCourseVariant:t})}}async componentDidMount(){var t,e,a,r,n,i,s,l;const o=await(0,u.$V)();this.setState({first_name:null===(t=o.user_field)||void 0===t?void 0:t.first_name,last_name:null===(e=o.user_field)||void 0===e?void 0:e.last_name,email:o.email,student_number:null===(a=o.user_field)||void 0===a?void 0:a.organizational_id,applies_for_study_right:"t"===(null===(r=o.extra_fields)||void 0===r?void 0:r.applies_for_study_right),digital_education_for_all:"t"===(null===(n=o.extra_fields)||void 0===n?void 0:n.digital_education_for_all),marketing:"t"===(null===(i=o.extra_fields)||void 0===i?void 0:i.marketing),research:null===(s=o.extra_fields)||void 0===s?void 0:s.research,currentCourseVariant:null===(l=o.extra_fields)||void 0===l?void 0:l.course_variant,loading:!1},(()=>{this.validate()}))}render(){return r.createElement(F,null,r.createElement(d.Z,{loading:this.state.loading,heightHint:"490px"},r.createElement(x,null,r.createElement(n.Z,null,r.createElement(i.Z,null,this.props.t("loggedInWith"),this.state.email)))),r.createElement("h1",null,this.props.t("studentInfo")),r.createElement(k,null,r.createElement(x,null,this.props.t("aboutYourself")),r.createElement(d.Z,{loading:this.state.loading,heightHint:"490px"},r.createElement("div",null,r.createElement(I,null,r.createElement(s.Z,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),r.createElement(I,null,r.createElement(s.Z,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),r.createElement(I,null,r.createElement(s.Z,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),r.createElement(I,null,r.createElement(Z,{selectedVariant:this.state.currentCourseVariant||"i",setSelectedVariant:this.setSelectedVariant})),r.createElement(I,null,r.createElement(l.Z,{control:r.createElement(o.Z,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",value:"1"}),label:this.props.t("marketing")})))),r.createElement("h2",null,this.props.t("researchTitle")),r.createElement("p",null,this.props.t("research1")),r.createElement("ol",null,r.createElement("li",null,this.props.t("research2")),r.createElement("li",null,this.props.t("research3")),r.createElement("li",null,this.props.t("research4"))),r.createElement("p",null,this.props.t("research5"),r.createElement("a",{href:"https://dl.acm.org/citation.cfm?id=2858798",target:"_blank",rel:"noopener noreferrer"},"Educational Data Mining and Learning Analytics in Programming: Literature Review and Case Studies"),"."),r.createElement("p",null,this.props.t("research6")),r.createElement("p",null,this.props.t("research7")),r.createElement(I,null,r.createElement(d.Z,{loading:this.state.loading,heightHint:"115px"},r.createElement(m.Z,{"aria-label":this.props.t("researchAgree"),name:"research",value:this.state.research,onChange:this.handleInput},r.createElement(l.Z,{value:"1",control:r.createElement(h.Z,{color:"primary"}),label:this.props.t("researchYes")}),r.createElement(l.Z,{value:"0",control:r.createElement(h.Z,null),label:this.props.t("researchNo")})))),r.createElement(I,null,r.createElement(c.Z,{onClick:this.onClick,disabled:this.state.submitting||this.state.error,loading:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0},this.props.t("save")))),this.state.error&&r.createElement(x,null,r.createElement("b",null,this.props.t("fillRequired"))))}}var O=(0,y.Z)("common")((0,f.Z)(N))},90936:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var r=a(67294),n=a(35414),i=a(22989),s=a(25444),l=a(1097),o=a(83332),m=a(94694),h=a(47065),c=a(58591),d=a(50535),u=a(13578);const p=d.default.div.withConfig({displayName:"CreateAccountForm__Row",componentId:"jadb0u-0"})(["margin-bottom:1.5rem;"]),f=d.default.form.withConfig({displayName:"CreateAccountForm__Form",componentId:"jadb0u-1"})([""]),g=d.default.div.withConfig({displayName:"CreateAccountForm__InfoBox",componentId:"jadb0u-2"})(["margin-bottom:2rem;"]),_=d.default.div.withConfig({displayName:"CreateAccountForm__FormContainer",componentId:"jadb0u-3"})(["height:100%;margin-top:2rem;"]);class v extends r.Component{constructor(){super(...arguments),this.onClick=async t=>{if(t.preventDefault(),this.setState({submitting:!0,triedSubmitting:!0}),this.validate())try{await(0,m.o1)({email:this.state.email,password:this.state.password,password_confirmation:this.state.password_confirmation});await(0,m.YR)({username:this.state.email,password:this.state.password}),this.props.onComplete()}catch(e){try{let t="";Object.entries(e).forEach((e=>{const a=e[0];e[1].forEach((e=>{let r=(0,h.fm)(a.replace(/_/g," ")+" "+e+".");"Email has already been taken."===r&&(r=this.props.t("emailInUse")),t=t+" "+r}))})),""===t&&(t=this.props.t("problemCreatingAccount")+JSON.stringify(e)),this.setState({error:t,submitting:!1,errorObj:e})}catch(a){this.setState({error:JSON.stringify(e),submitting:!1})}this.setState({submitting:!1})}else this.setState({canSubmit:!1,submitting:!1})},this.handleInput=t=>{const e=t.target.name,a=t.target.value;this.setState({[e]:a},(()=>{this.validate()}))},this.validate=()=>{let t={error:"",errorObj:{}};const{email:e,password:a,password_confirmation:r,validatePassword:n,validateEmail:i,triedSubmitting:s}=this.state;return e&&i&&(-1===e.indexOf("@")&&(t.error+=this.props.t("noAt"),t.errorObj.email=this.props.t("noAt")),e&&-1===e.indexOf(".")&&(t.error+=this.props.t("noAt"),t.errorObj.email=this.props.t("noAt"))),a&&r&&n&&a!==r&&(t.error+=this.props.t("passwordsNoMatch"),t.errorObj.password=this.props.t("passwordsNoMatch"),t.errorObj.password_confirmation=this.props.t("passwordsNoMatch")),""===t.error&&(t.error=!1,t.canSubmit=!0),e&&a&&r?(this.setState(t),!t.error):(s&&(t.canSubmit=!1),!1)},this.state={email:void 0,password:void 0,password_confirmation:void 0,submitting:!1,error:!1,errorObj:{},validatePassword:!1,validateEmail:!1,canSubmit:!0,triedSubmitting:!0}}render(){return this.context.loggedIn?((0,s.navigate)("/"),r.createElement("div",null,"Redirecting...")):r.createElement(_,null,r.createElement("h1",null,this.props.t("createAccount")),r.createElement(f,{onChange:this.validate},r.createElement(g,null,this.props.t("courseUses")," ",r.createElement("a",{href:"https://mooc.fi",target:"_blank",rel:"noopener noreferrer"},"mooc.fi")," ",this.props.t("courseUses2")),r.createElement(p,null,r.createElement(l.Z,{variant:"outlined",type:"email",name:"email",autoComplete:"email",label:this.props.t("email"),error:this.state.errorObj.email,fullWidth:!0,value:this.state.email,onChange:this.handleInput,onBlur:()=>{this.setState({validateEmail:!0},(()=>{this.validate()}))}})),r.createElement(p,null,r.createElement(l.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("password"),name:"password",error:this.state.errorObj.password,fullWidth:!0,value:this.state.password,onChange:this.handleInput})),r.createElement(p,null,r.createElement(l.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("passwordAgain"),name:"password_confirmation",error:this.state.errorObj.password_confirmation,fullWidth:!0,value:this.state.password_confirmation,onChange:this.handleInput,onBlur:()=>{this.setState({validatePassword:!0},(()=>{this.validate()}))}})),r.createElement(p,null,r.createElement(o.Z,{onClick:this.onClick,disabled:this.state.submitting||!this.state.canSubmit,variant:"contained",color:"primary",fullWidth:!0,type:"submit"},this.props.t("create")))),r.createElement(p,null,r.createElement(s.Link,{to:"/sign-in"},this.props.t("alreadyHaveAccount"))),this.state.error&&r.createElement(g,null,r.createElement("b",null,this.props.t("error")," ",this.state.error)))}}var E=(0,c.Z)("user")((0,u.Z)(v)),b=a(62138),C=a.p+"static/email-example-dfbd631229d83018bc9fcaba5fffd852.png";const w=d.default.div.withConfig({displayName:"ConfirmEmail__InfoBox",componentId:"sc-1t4zqh3-0"})(["margin-bottom:2rem;"]),y=d.default.div.withConfig({displayName:"ConfirmEmail__FormContainer",componentId:"sc-1t4zqh3-1"})(["height:100%;margin-top:2rem;"]),S=d.default.img.withConfig({displayName:"ConfirmEmail__StyledImage",componentId:"sc-1t4zqh3-2"})(["width:100%;padding:1rem 0;"]);class Z extends r.Component{constructor(){super(...arguments),this.onClick=async t=>{t.preventDefault()},this.state={email:void 0,password:void 0,submitting:!1,error:!1}}render(){return r.createElement(y,null,r.createElement("h1",null,this.props.t("welcomeToCourse")),r.createElement(w,null,r.createElement("p",null,this.props.t("emailSent")," "),r.createElement("p",null,this.props.t("emailExample")),r.createElement(S,{src:C,alt:this.props.t("emaiLExampleAria")})),r.createElement("p",null,this.props.t("nowContinue")," ",r.createElement(s.Link,{to:"/osa-1"},this.props.t("toMaterial")),"."))}}var I=(0,c.Z)("user")((0,u.Z)(Z)),k=a(54021),x=a(86810);class F extends r.Component{constructor(){super(...arguments),this.state={step:1},this.onStepComplete=()=>{this.setState((t=>({step:t.step+1}))),"undefined"!=typeof window&&window.scrollTo(0,0)}}render(){let t;return t=1===this.state.step?r.createElement(E,{onComplete:this.onStepComplete}):2===this.state.step?r.createElement(b.Z,{courseVariant:"nodl",onComplete:this.onStepComplete}):r.createElement(I,{onComplete:this.onStepComplete}),r.createElement(i.Z,null,r.createElement(n.Z,{title:"Luo käyttäjätunnus"}),r.createElement(x.Z,null,t))}}F.contextType=k.ZP;var N=(0,k._N)(F)}}]);
//# sourceMappingURL=component---src-pages-sign-up-js-69fbc2bcb0057bf8efda.js.map